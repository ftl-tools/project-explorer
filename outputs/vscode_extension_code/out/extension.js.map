{
  "version": 3,
  "sources": ["../src/extension.ts", "../src/ProjectExplorerProvider.ts", "../src/parser.ts", "../src/builder.ts"],
  "sourcesContent": ["import * as vscode from 'vscode';\nimport { ProjectExplorerProvider } from './ProjectExplorerProvider';\n\nimport { activateParser } from './parser';\nimport { activateBuilder } from './builder';\n\nexport async function activate(context: vscode.ExtensionContext) {\n    const provider = new ProjectExplorerProvider(context);\n\n    // Ensure workspace .vscode/project_explorer exists and start parser/builder\n    const ws = vscode.workspace.workspaceFolders?.[0];\n    if (ws) {\n        const dir = vscode.Uri.joinPath(ws.uri, '.vscode', 'project_explorer');\n        await vscode.workspace.fs.createDirectory(dir);\n    }\n    const parser = activateParser(context);\n    const builder = activateBuilder(context);\n\n    vscode.window.registerTreeDataProvider('projectExplorer', provider);\n\n    // Watch for theme changes to update icons\n    vscode.window.onDidChangeActiveColorTheme(() => {\n        provider.refresh();\n    });\n\n    const updateBrainstormingContext = () => {\n        const cfg = vscode.workspace.getConfiguration('project-explorer');\n        const raw = cfg.get<string>('brainstormingDocPath') || '';\n        const has = typeof raw === 'string' && raw.trim().length > 0;\n        void vscode.commands.executeCommand('setContext', 'projectExplorer.hasBrainstorming', has);\n    };\n\n    updateBrainstormingContext();\n\n    context.subscriptions.push(\n        vscode.workspace.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('project-explorer.brainstormingDocPath') || e.affectsConfiguration('project-explorer')) {\n                updateBrainstormingContext();\n            }\n        })\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('projectExplorer.openBrainstormingDoc', async () => {\n            const cfg = vscode.workspace.getConfiguration('project-explorer');\n            const pathSetting = (cfg.get<string>('brainstormingDocPath') || '').trim();\n            if (!pathSetting) {\n                vscode.window.showWarningMessage('No brainstormingDocPath is configured.');\n                return;\n            }\n\n            try {\n                let targetUri: vscode.Uri | undefined;\n                const isAbsolute = pathSetting.startsWith('/') || /^[a-zA-Z]:\\\\/.test(pathSetting) || pathSetting.startsWith('~');\n                if (isAbsolute) {\n                    // expand ~ if present\n                    const expanded = pathSetting.startsWith('~') && process.env.HOME\n                        ? pathSetting.replace('~', process.env.HOME)\n                        : pathSetting;\n                    targetUri = vscode.Uri.file(expanded);\n                } else {\n                    const ws = vscode.workspace.workspaceFolders?.[0];\n                    if (!ws) {\n                        vscode.window.showErrorMessage('No workspace is open to resolve a relative brainstormingDocPath.');\n                        return;\n                    }\n                    targetUri = vscode.Uri.joinPath(ws.uri, pathSetting);\n                }\n\n                const doc = await vscode.workspace.openTextDocument(targetUri);\n                await vscode.window.showTextDocument(doc, { preview: false });\n            } catch (err) {\n                const msg = err instanceof Error ? err.message : String(err);\n                vscode.window.showErrorMessage(`Unable to open brainstorming document: ${msg}`);\n            }\n        })\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('projectExplorer.openExternal', async (url: string) => {\n            try {\n                const uri = vscode.Uri.parse(url);\n                await vscode.env.openExternal(uri);\n            } catch (err) {\n                const msg = err instanceof Error ? err.message : String(err);\n                vscode.window.showErrorMessage(`Unable to open URL: ${msg}`);\n            }\n        })\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('projectExplorer.runScript', async (id: string) => {\n            await provider.runScriptById(id);\n        })\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('projectExplorer.openHelp', async () => {\n            const id = context.extension.id;\n            const uri = vscode.Uri.parse(`vscode:extension/${id}`);\n            await vscode.commands.executeCommand('vscode.open', uri);\n        })\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('projectExplorer.openSettings', async () => {\n            const hasWs = (vscode.workspace.workspaceFolders?.length || 0) > 0;\n            if (hasWs) {\n                await vscode.commands.executeCommand('workbench.action.openWorkspaceSettings');\n                await vscode.commands.executeCommand('workbench.action.openSettings', '@ext:ftl-tools.project-explorer');\n            } else {\n                vscode.window.showInformationMessage('Workspace settings are unavailable. Opening User settings.');\n                await vscode.commands.executeCommand('workbench.action.openSettings', '@ext:ftl-tools.project-explorer');\n            }\n        })\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('projectExplorer.configureTreeItems', async () => {\n            await vscode.commands.executeCommand('workbench.action.openSettings', 'project-explorer.treeItems');\n        })\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('projectExplorer.collapseAll', async () => {\n            await vscode.commands.executeCommand('workbench.actions.treeView.projectExplorer.collapseAll');\n        })\n    );\n}\n\n\n\nexport function deactivate() {}", "import * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport * as https from 'https';\nimport * as http from 'http';\nimport { spawn } from 'child_process';\n\nclass FaviconCache {\n    private cacheDir: string;\n    private indexPath: string;\n    private index: Record<string, { path?: string; expiresAt?: number; negativeUntil?: number }>; // keyed by origin\n    private inflight: Map<string, Promise<vscode.Uri | undefined>> = new Map();\n\n    constructor(private context: vscode.ExtensionContext) {\n        this.cacheDir = path.join(context.globalStorageUri.fsPath, 'favicons');\n        this.indexPath = path.join(this.cacheDir, 'index.json');\n        try { fs.mkdirSync(this.cacheDir, { recursive: true }); } catch {}\n        this.index = this.readIndex();\n    }\n\n    async getIconForUrl(urlStr: string): Promise<vscode.Uri | undefined> {\n        let origin: string;\n        try {\n            const u = new URL(urlStr);\n            if (u.protocol !== 'http:' && u.protocol !== 'https:') return undefined;\n            origin = `${u.protocol}//${u.host}`;\n        } catch { return undefined; }\n\n        // de-dupe concurrent fetches per origin\n        const existing = this.inflight.get(origin);\n        if (existing) return existing;\n\n        const promise = this.resolve(origin, urlStr).finally(() => this.inflight.delete(origin));\n        this.inflight.set(origin, promise);\n        return promise;\n    }\n\n    private async resolve(origin: string, fullUrl: string): Promise<vscode.Uri | undefined> {\n        const now = Date.now();\n        const entry = this.index[origin];\n        if (entry) {\n            if (entry.expiresAt && entry.expiresAt > now && entry.path && fs.existsSync(entry.path)) {\n                return vscode.Uri.file(entry.path);\n            }\n            if (entry.negativeUntil && entry.negativeUntil > now) return undefined;\n        }\n\n        // Try /favicon.ico first\n        const icoUrl = `${origin}/favicon.ico`;\n        const icoBuf = await this.tryFetchBuffer(icoUrl, 5000).catch(() => undefined);\n        if (icoBuf) {\n            const file = this.saveIcon(origin, icoBuf, 'ico');\n            this.index[origin] = { path: file, expiresAt: now + 7 * 24 * 60 * 60 * 1000 };\n            this.writeIndex();\n            return vscode.Uri.file(file);\n        }\n\n        // Fallback: parse HTML for <link rel=\"icon\"> etc\n        const html = await this.tryFetchText(fullUrl, 5000).catch(() => undefined);\n        if (html) {\n            const href = this.findIconHref(html);\n            if (href) {\n                try {\n                    const base = new URL(fullUrl);\n                    const resolved = new URL(href, base);\n                    const buf = await this.tryFetchBuffer(resolved.toString(), 7000).catch(() => undefined);\n                    if (buf) {\n                        const ext = this.guessExtFromUrlOrMime(resolved.toString());\n                        const file = this.saveIcon(origin, buf, ext);\n                        this.index[origin] = { path: file, expiresAt: now + 7 * 24 * 60 * 60 * 1000 };\n                        this.writeIndex();\n                        return vscode.Uri.file(file);\n                    }\n                } catch {}\n            }\n        }\n\n        // Negative cache\n        this.index[origin] = { negativeUntil: now + 24 * 60 * 60 * 1000 };\n        this.writeIndex();\n        return undefined;\n    }\n\n    private readIndex(): Record<string, { path?: string; expiresAt?: number; negativeUntil?: number }> {\n        try {\n            if (fs.existsSync(this.indexPath)) {\n                const txt = fs.readFileSync(this.indexPath, 'utf8');\n                return JSON.parse(txt) || {};\n            }\n        } catch {}\n        return {};\n    }\n\n    private writeIndex(): void {\n        try { fs.writeFileSync(this.indexPath, JSON.stringify(this.index, null, 2), 'utf8'); } catch {}\n    }\n\n    private saveIcon(origin: string, buf: Buffer, ext: string): string {\n        const safe = origin.replace(/[^a-z0-9]/gi, '_');\n        const file = path.join(this.cacheDir, `${safe}.${ext}`);\n        fs.writeFileSync(file, buf);\n        return file;\n    }\n\n    private guessExtFromUrlOrMime(u: string): string {\n        const lower = u.toLowerCase();\n        if (lower.endsWith('.png')) return 'png';\n        if (lower.endsWith('.svg') || lower.includes('image/svg')) return 'svg';\n        if (lower.endsWith('.jpg') || lower.endsWith('.jpeg')) return 'jpg';\n        if (lower.endsWith('.ico')) return 'ico';\n        return 'png';\n    }\n\n    private async tryFetchText(urlStr: string, timeoutMs: number): Promise<string> {\n        const buf = await this.tryFetchBuffer(urlStr, timeoutMs);\n        return buf.toString('utf8');\n    }\n\n    private async tryFetchBuffer(urlStr: string, timeoutMs: number): Promise<Buffer> {\n        return new Promise<Buffer>((resolve, reject) => {\n            let timedOut = false;\n            const to = setTimeout(() => { timedOut = true; req?.destroy(new Error('timeout')); reject(new Error('timeout')); }, timeoutMs);\n            const u = new URL(urlStr);\n            const lib = u.protocol === 'https:' ? https : http;\n            const req = lib.get(urlStr, res => {\n                const status = res.statusCode || 0;\n                // Handle redirects\n                if ([301, 302, 303, 307, 308].includes(status) && res.headers.location) {\n                    clearTimeout(to);\n                    this.tryFetchBuffer(new URL(res.headers.location, urlStr).toString(), timeoutMs).then(resolve, reject);\n                    res.resume();\n                    return;\n                }\n                if (status < 200 || status >= 300) {\n                    clearTimeout(to);\n                    reject(new Error(`HTTP ${status}`));\n                    res.resume();\n                    return;\n                }\n                const chunks: Buffer[] = [];\n                res.on('data', d => chunks.push(Buffer.isBuffer(d) ? d : Buffer.from(d)));\n                res.on('end', () => { if (!timedOut) { clearTimeout(to); resolve(Buffer.concat(chunks)); } });\n                res.on('error', err => { if (!timedOut) { clearTimeout(to); reject(err); } });\n            });\n            req.on('error', err => { if (!timedOut) { clearTimeout(to); reject(err); } });\n        });\n    }\n\n    private findIconHref(html: string): string | undefined {\n        // Very small heuristic: look for rel containing 'icon' and grab href\n        const re = /<link\\s+[^>]*rel=[\"']([^\"']*)[\"'][^>]*href=[\"']([^\"']+)[\"'][^>]*>/gi;\n        let m: RegExpExecArray | null;\n        const candidates: string[] = [];\n        while ((m = re.exec(html))) {\n            const rel = m[1].toLowerCase();\n            const href = m[2];\n            if (rel.includes('icon')) candidates.push(href);\n        }\n        return candidates[0];\n    }\n}\n\nexport class ProjectExplorerProvider implements vscode.TreeDataProvider<ProjectExplorerItem> {\n    private _onDidChangeTreeData = new vscode.EventEmitter<ProjectExplorerItem | undefined | null | void>();\n    readonly onDidChangeTreeData = this._onDidChangeTreeData.event;\n\n    private items: Map<string, ProjectExplorerItem> = new Map();\n    private treeFileUri: vscode.Uri | null = null;\n    private watcher: vscode.FileSystemWatcher | null = null;\n    private parentById: Map<string, string | undefined> = new Map();\n    private childrenById: Map<string, string[]> = new Map();\n    private roots: string[] = [];\n\n    private favicons: FaviconCache;\n\n    private running: Set<string> = new Set();\n    private scriptIds: Set<string> = new Set();\n\n    constructor(context: vscode.ExtensionContext) {\n        this.favicons = new FaviconCache(context);\n        const ws = vscode.workspace.workspaceFolders?.[0];\n        if (ws) {\n            this.treeFileUri = vscode.Uri.joinPath(ws.uri, '.vscode', 'project_explorer', 'tree_items.json');\n            const pattern = new vscode.RelativePattern(ws, '.vscode/project_explorer/tree_items.json');\n            this.watcher = vscode.workspace.createFileSystemWatcher(pattern);\n            this.watcher.onDidChange(() => this.refresh());\n            this.watcher.onDidCreate(() => this.refresh());\n        }\n\n        vscode.workspace.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('project-explorer.treeItems') || e.affectsConfiguration('project-explorer')) {\n                this.refresh();\n            }\n        });\n    }\n\n    refresh(): void {\n        this.rebuild();\n        this._onDidChangeTreeData.fire();\n    }\n\n    getTreeItem(element: ProjectExplorerItem): vscode.TreeItem {\n        return element;\n    }\n\n    async getChildren(element?: ProjectExplorerItem): Promise<ProjectExplorerItem[]> {\n        if (this.items.size === 0 && this.roots.length === 0) this.rebuild();\n        if (!element) return this.roots.map(id => this.items.get(id)!).filter(Boolean);\n        const ids = this.childrenById.get(element.id || '') || [];\n        return ids.map(id => this.items.get(id)!).filter(Boolean);\n    }\n\n    private rebuild() {\n        const warnings = new Set<string>();\n\n        this.items.clear();\n        this.parentById.clear();\n        this.childrenById.clear();\n        this.roots = [];\n        this.scriptIds.clear();\n\n        const arr = this.readTreeItemsFromFile();\n\n        type UserItem = {\n            id?: unknown;\n            typeAndPath?: unknown; // new name\n            type_plus_path?: unknown; // deprecated, supported for backward compatibility\n            icon?: unknown;\n            label?: unknown;\n            parentId?: unknown;\n            cwd?: unknown;\n            env?: unknown;\n        };\n\n        type ValidItem = { id: string; type?: 'file' | 'folder' | 'url' | 'script'; target?: string; icon?: string; label: string; parentId?: string | null; cwd?: string; env?: Record<string, string> };\n        const valid: Array<ValidItem> = [];\n\n        for (const entry of arr as any[]) {\n            if (!entry || typeof entry !== 'object') {\n                warnings.add('Ignored non-object entry in `project-explorer.treeItems`.');\n                continue;\n            }\n            const id = typeof entry.id === 'string' && entry.id.trim() ? entry.id.trim() : '';\n            const typeAndPath = typeof (entry as any).typeAndPath === 'string' ? (entry as any).typeAndPath : undefined;\n            if (!id) {\n                warnings.add('Ignored item with missing `id`.');\n                continue;\n            }\n            if (this.items.has(id) || valid.find(v => v.id === id)) {\n                warnings.add(`Duplicate id '${id}' found. Only the first occurrence will be used.`);\n                continue;\n            }\n\n            const parentId = typeof entry.parentId === 'string' && entry.parentId.trim() ? entry.parentId.trim() : undefined;\n            const labelRaw = typeof entry.label === 'string' && entry.label.trim() ? entry.label.trim() : undefined;\n            const icon = typeof entry.icon === 'string' && entry.icon.trim() ? entry.icon.trim() : undefined;\n\n            let type: 'file' | 'folder' | 'url' | 'script' | undefined;\n            let target: string | undefined;\n\n            const newRaw = typeAndPath;\n            const oldRaw = (entry as any).type_plus_path;\n            const tpp = typeof newRaw === 'string' && newRaw.trim() ? newRaw.trim() : (typeof oldRaw === 'string' && oldRaw.trim() ? oldRaw.trim() : '');\n            if (!tpp && typeof oldRaw === 'string' && oldRaw.trim()) {\n                warnings.add(`Item '${id}' uses deprecated 'type_plus_path'. Please rename to 'typeAndPath'.`);\n            }\n            if (tpp) {\n                const colon = tpp.indexOf(':');\n                if (colon > 0 && colon < tpp.length - 1) {\n                    const t = tpp.slice(0, colon) as 'file' | 'folder' | 'url' | 'script';\n                    const tgt = tpp.slice(colon + 1);\n                    if (['file', 'folder', 'url', 'script'].includes(t)) {\n                        type = t;\n                        target = tgt;\n                    } else {\n                        warnings.add(`Item '${id}' has unknown type '${t}'. Treating as label-only item.`);\n                    }\n                } else {\n                    warnings.add(`Item '${id}' has invalid typeAndPath '${tpp}'. Treating as label-only item.`);\n                }\n            }\n\n            // Determine label fallback behavior\n            let label = labelRaw;\n            if (!label) {\n                if (type && target) {\n                    if (type === 'url') {\n                        try {\n                            const u = new URL(target);\n                            const segs = u.pathname.split('/').filter(Boolean);\n                            label = segs.length > 0 ? decodeURIComponent(segs[segs.length - 1]) : u.hostname;\n                        } catch {\n                            label = target;\n                        }\n                    } else if (type === 'file' || type === 'folder') {\n                        label = path.basename(this.resolveFsPath(target));\n                    } else if (type === 'script') {\n                        label = target;\n                    }\n                } else {\n                    // No type/target and no label provided; fall back to id\n                    label = id;\n                }\n            }\n\n            const v: ValidItem = { id, type, target, label: label!, icon, parentId: parentId ?? undefined };\n            if (type === 'script') {\n                const cwd = typeof (entry as any).cwd === 'string' && (entry as any).cwd.trim() ? (entry as any).cwd.trim() : undefined;\n                const envRaw = (entry as any).env;\n                let env: Record<string, string> | undefined;\n                if (envRaw && typeof envRaw === 'object' && !Array.isArray(envRaw)) {\n                    env = {};\n                    for (const [k, val] of Object.entries(envRaw as Record<string, unknown>)) {\n                        if (typeof val === 'string') env[k] = val;\n                    }\n                }\n                v.cwd = cwd;\n                v.env = env;\n                this.scriptIds.add(id);\n            }\n\n            valid.push(v);\n        }\n\n        // Build nodes\n        for (const v of valid) {\n            const node = this.makeNode(v);\n            this.items.set(v.id, node);\n            this.parentById.set(v.id, v.parentId || undefined);\n        }\n\n        // Enforce: children cannot have script parent\n        for (const [id, pid] of Array.from(this.parentById.entries())) {\n            if (pid && this.scriptIds.has(pid)) {\n                warnings.add(`Item '${id}' cannot have script parent '${pid}'. Rendering as top-level.`);\n                this.parentById.set(id, undefined);\n            }\n        }\n\n        // Detect cycles\n        const visited = new Set<string>();\n        const stack = new Set<string>();\n        const cyc = new Set<string>();\n        const dfs = (id: string) => {\n            if (stack.has(id)) {\n                cyc.add(id);\n                return;\n            }\n            if (visited.has(id)) return;\n            visited.add(id);\n            stack.add(id);\n            const p = this.parentById.get(id);\n            if (p && this.items.has(p)) dfs(p);\n            stack.delete(id);\n        };\n        for (const id of this.items.keys()) dfs(id);\n        if (cyc.size > 0) warnings.add('Detected cyclical parent relationships. Items in cycles will be rendered at top level.');\n        for (const id of cyc) this.parentById.delete(id);\n\n        // Build children and roots\n        for (const id of this.items.keys()) this.childrenById.set(id, []);\n        for (const [id, pid] of this.parentById) {\n            if (pid && this.items.has(pid)) this.childrenById.get(pid)!.push(id);\n        }\n        // Any with no valid parent are roots\n        for (const id of this.items.keys()) {\n            const pid = this.parentById.get(id);\n            if (!pid || !this.items.has(pid)) {\n                if (pid && !this.items.has(pid)) warnings.add(`Parent '${pid}' not found for item '${id}'. Rendering as top-level.`);\n                this.roots.push(id);\n            }\n        }\n\n        // Set collapsible state based on children\n        for (const [id, node] of this.items) {\n            const hasChildren = (this.childrenById.get(id) || []).length > 0;\n            node.collapsibleState = hasChildren ? vscode.TreeItemCollapsibleState.Collapsed : vscode.TreeItemCollapsibleState.None;\n            // For label-only items without explicit icon, use folder icon to hint grouping\n            if (!node.command && !node.iconPath && !('script' in node)) {\n                node.iconPath = new vscode.ThemeIcon('folder');\n            }\n        }\n\n        // Surface warnings (non-blocking)\n        if (warnings.size > 0) {\n            vscode.window.showWarningMessage(Array.from(warnings).join(' '));\n        }\n    }\n\n    private makeNode(v: { id: string; type?: 'file' | 'folder' | 'url' | 'script'; target?: string; icon?: string; label: string; parentId?: string | null; cwd?: string; env?: Record<string, string>; }): ProjectExplorerItem {\n        const { id } = v;\n        const type = v.type;\n        const target = v.target;\n        let label = v.label;\n        let iconPath: vscode.ThemeIcon | vscode.Uri | undefined;\n        const tooltip = new vscode.MarkdownString();\n        if (type && target) tooltip.appendText(`${type}:${target}`); else tooltip.appendText(label);\n        tooltip.isTrusted = true;\n\n        // icon resolution\n        if (v.icon) {\n            const codicon = this.parseCodicon(v.icon);\n            if (codicon) iconPath = new vscode.ThemeIcon(codicon);\n            else {\n                const p = this.resolveFsPath(v.icon);\n                if (fs.existsSync(p)) iconPath = vscode.Uri.file(p);\n                else vscode.window.showWarningMessage(`Icon path not found for item '${id}': ${v.icon}. Falling back to default icon.`);\n            }\n        } else if (type === 'url') {\n            iconPath = new vscode.ThemeIcon('globe');\n        } else if (type === 'script') {\n            iconPath = new vscode.ThemeIcon('run');\n        }\n\n        const node = new ProjectExplorerItem(label, vscode.TreeItemCollapsibleState.None) as ProjectExplorerItem & { script?: { cmd: string; cwd?: string; env?: Record<string, string> } };\n        node.id = id;\n        node.tooltip = tooltip;\n        node.iconPath = iconPath;\n\n        // command behavior\n        if (type === 'file' && target) {\n            const uri = vscode.Uri.file(this.resolveFsPath(target));\n            node.command = { command: 'vscode.open', title: 'Open File', arguments: [uri] };\n        } else if (type === 'folder' && target) {\n            const uri = vscode.Uri.file(this.resolveFsPath(target));\n            node.command = { command: 'revealInExplorer', title: 'Reveal in Explorer', arguments: [uri] } as any;\n        } else if (type === 'url' && target) {\n            node.command = { command: 'projectExplorer.openExternal', title: 'Open in Browser', arguments: [target] };\n            // Attempt async favicon resolution when user hasn't set a custom icon\n            if (!v.icon) {\n                this.favicons.getIconForUrl(target).then(uri => {\n                    if (uri) {\n                        const n = this.items.get(id);\n                        if (n) {\n                            n.iconPath = uri;\n                            this._onDidChangeTreeData.fire(n);\n                        }\n                    }\n                }).catch(() => {/*ignore*/});\n            }\n        } else if (type === 'script' && target) {\n            node.script = { cmd: target, cwd: v.cwd, env: v.env };\n            node.command = { command: 'projectExplorer.runScript', title: 'Run Script', arguments: [id] };\n        }\n\n        return node;\n    }\n\n    async runScriptById(id: string): Promise<void> {\n        const node = this.items.get(id) as (ProjectExplorerItem & { script?: { cmd: string; cwd?: string; env?: Record<string, string> } }) | undefined;\n        if (!node || !node.script) return;\n        if (this.running.has(id)) return; // already running\n\n        const originalLabel = node.label as string;\n        this.running.add(id);\n        node.command = undefined; // disable while running\n        node.label = `${originalLabel}...`;\n        this._onDidChangeTreeData.fire(node);\n\n        const cwd = node.script.cwd ? this.resolveFsPath(node.script.cwd) : undefined;\n        if (cwd && !fs.existsSync(cwd)) {\n            vscode.window.showErrorMessage(`Invalid cwd for script '${id}': ${cwd}`);\n            // restore state\n            this.running.delete(id);\n            node.label = originalLabel;\n            node.command = { command: 'projectExplorer.runScript', title: 'Run Script', arguments: [id] };\n            this._onDidChangeTreeData.fire(node);\n            return;\n        }\n\n        const env = { ...process.env, ...(node.script.env || {}) } as NodeJS.ProcessEnv;\n        const child = spawn(node.script.cmd, { shell: true, cwd, env });\n\n        let stdout = '';\n        let stderr = '';\n        child.stdout?.on('data', d => { stdout += d instanceof Buffer ? d.toString('utf8') : String(d); });\n        child.stderr?.on('data', d => { stderr += d instanceof Buffer ? d.toString('utf8') : String(d); });\n\n        let notified = false;\n        const finish = (ok: boolean, message?: string) => {\n            if (!notified) {\n                notified = true;\n                if (ok) {\n                    const out = (message ?? stdout).trim();\n                    vscode.window.showInformationMessage(out.length > 0 ? out : `Script '${id}' completed successfully.`);\n                } else {\n                    const err = (message ?? stderr).trim();\n                    vscode.window.showErrorMessage(err.length > 0 ? err : `Script '${id}' failed.`);\n                }\n            }\n            this.running.delete(id);\n            node.label = originalLabel;\n            node.command = { command: 'projectExplorer.runScript', title: 'Run Script', arguments: [id] };\n            this._onDidChangeTreeData.fire(node);\n        };\n\n        child.on('error', err => {\n            finish(false, `Failed to start script '${id}': ${err instanceof Error ? err.message : String(err)}`);\n        });\n        child.on('close', (code: number | null) => {\n            finish(code === 0);\n        });\n    }\n\n    private readTreeItemsFromFile(): any[] {\n        try {\n            if (this.treeFileUri) {\n                const p = this.treeFileUri.fsPath;\n                if (fs.existsSync(p)) {\n                    const txt = fs.readFileSync(p, 'utf8');\n                    const arr = JSON.parse(txt);\n                    return Array.isArray(arr) ? arr : [];\n                }\n            }\n        } catch {}\n        return [];\n    }\n\n    private parseCodicon(s: string): string | null {\n        const m = /^\\$\\(([^)]+)\\)$/.exec(s.trim());\n        return m ? m[1] : null;\n    }\n\n    private resolveFsPath(p: string): string {\n        let s = p.trim();\n        if (s.startsWith('~') && process.env.HOME) s = s.replace('~', process.env.HOME);\n        if (path.isAbsolute(s)) return s;\n        const ws = vscode.workspace.workspaceFolders?.[0];\n        if (ws) return path.join(ws.uri.fsPath, s);\n        return s; // fall back\n    }\n}\n\nexport class ProjectExplorerItem extends vscode.TreeItem {\n    constructor(label: string, collapsibleState: vscode.TreeItemCollapsibleState) {\n        super(label, collapsibleState);\n    }\n}\n", "import * as vscode from 'vscode';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nconst ensureDir = (p: string) => { try { fs.mkdirSync(p, { recursive: true }); } catch {} };\nconst writeJsonAtomic = (file: string, obj: unknown) => {\n  const tmp = `${file}.tmp`;\n  fs.writeFileSync(tmp, JSON.stringify(obj, null, 2), 'utf8');\n  fs.renameSync(tmp, file);\n};\n\nexport type ParserSections = {\n  userDefined?: any[];\n  docs?: Record<string, DocNode>;\n};\n\nexport type DocNode = { path: string; type: 'doc' | 'folder' | 'resource'; title: string; children: DocNode[] };\n\nexport function activateParser(ctx: vscode.ExtensionContext): { dispose(): void } {\n  const ws = vscode.workspace.workspaceFolders?.[0];\n  const outDir = path.join(ws?.uri.fsPath || '', '.vscode', 'project_explorer');\n  if (ws) ensureDir(outDir);\n  const outFile = ws ? path.join(outDir, 'parser_output.json') : '';\n\n  let timer: NodeJS.Timeout | undefined;\n  const debouncedRun = () => {\n    if (timer) clearTimeout(timer);\n    timer = setTimeout(run, 150);\n  };\n\n  const cfgListener = vscode.workspace.onDidChangeConfiguration(e => {\n    if (e.affectsConfiguration('project-explorer.watchThese') || e.affectsConfiguration('project-explorer.userDefinedTreeItems') || e.affectsConfiguration('project-explorer.treeItems')) debouncedRun();\n  });\n\n  const fsWatchers: vscode.FileSystemWatcher[] = [];\n\n  const watchPath = (relOrAbs: string) => {\n    if (!ws) return;\n    const abs = path.isAbsolute(relOrAbs) ? relOrAbs : path.join(ws.uri.fsPath, relOrAbs);\n    const pat = abs.replace(/\\\\/g, '/');\n    const glob = new vscode.RelativePattern(ws, path.relative(ws.uri.fsPath, pat) + '/**');\n    const w = vscode.workspace.createFileSystemWatcher(glob);\n    fsWatchers.push(w);\n    w.onDidChange(debouncedRun);\n    w.onDidCreate(debouncedRun);\n    w.onDidDelete(debouncedRun);\n  };\n\n  const readFirstH1 = (file: string): string => {\n    try {\n      const txt = fs.readFileSync(file, 'utf8');\n      const m = /^#\\s+(.+)$/m.exec(txt);\n      return m ? m[1].trim() : '';\n    } catch { return ''; }\n  };\n\n  const buildDocs = (p: string): DocNode => {\n    const stat = fs.existsSync(p) ? fs.statSync(p) : undefined;\n    if (!stat) return { path: rel(p), type: 'resource', title: '', children: [] };\n    if (stat.isDirectory()) {\n      const children: DocNode[] = [];\n      for (const name of fs.readdirSync(p)) {\n        if (name === '.git' || name === 'node_modules') continue;\n        const child = path.join(p, name);\n        children.push(buildDocs(child));\n      }\n      return { path: rel(p), type: 'folder', title: '', children };\n    }\n    if (p.toLowerCase().endsWith('.md')) {\n      return { path: rel(p), type: 'doc', title: readFirstH1(p), children: [] };\n    }\n    return { path: rel(p), type: 'resource', title: '', children: [] };\n  };\n\n  const rel = (abs: string) => ws ? path.relative(ws.uri.fsPath, abs) : abs;\n\n  const run = () => {\n    const cfg = vscode.workspace.getConfiguration('project-explorer');\n    const watch = cfg.get<any[]>('watchThese') || [];\n    const userDefined = (cfg.get<any[]>('userDefinedTreeItems') || cfg.get<any[]>('treeItems') || []).filter(Boolean);\n\n    const out: ParserSections = {};\n    if (userDefined.length > 0) out.userDefined = userDefined;\n\n    if (ws) {\n      // reset watchers\n      while (fsWatchers.length) fsWatchers.pop()?.dispose();\n      const docsSection: Record<string, DocNode> = {};\n      for (const entry of watch) {\n        if (!entry || typeof entry !== 'object') continue;\n        if (entry.type === 'docs' && typeof entry.path === 'string' && entry.path.trim()) {\n          const abs = path.isAbsolute(entry.path) ? entry.path : path.join(ws.uri.fsPath, entry.path);\n          watchPath(entry.path);\n          docsSection[entry.path] = buildDocs(abs);\n        }\n      }\n      if (Object.keys(docsSection).length > 0) out.docs = docsSection;\n      ensureDir(outDir);\n      writeJsonAtomic(outFile, out);\n    }\n  };\n\n  if (ws) run();\n\n  ctx.subscriptions.push(cfgListener);\n  return { dispose() { while (fsWatchers.length) fsWatchers.pop()?.dispose(); if (timer) clearTimeout(timer); } };\n}\n", "import * as vscode from 'vscode';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { DocNode, ParserSections } from './parser';\n\nconst ensureDir = (p: string) => { try { fs.mkdirSync(p, { recursive: true }); } catch {} };\nconst writeJsonAtomic = (file: string, obj: unknown) => {\n  const tmp = `${file}.tmp`;\n  fs.writeFileSync(tmp, JSON.stringify(obj, null, 2), 'utf8');\n  fs.renameSync(tmp, file);\n};\n\nexport function activateBuilder(ctx: vscode.ExtensionContext): { dispose(): void } {\n  const ws = vscode.workspace.workspaceFolders?.[0];\n  if (!ws) return { dispose() {} };\n  const root = ws.uri.fsPath;\n  const outDir = path.join(root, '.vscode', 'project_explorer');\n  const parserFile = path.join(outDir, 'parser_output.json');\n  const treeFile = path.join(outDir, 'tree_items.json');\n  ensureDir(outDir);\n\n  const pattern = new vscode.RelativePattern(ws, '.vscode/project_explorer/parser_output.json');\n  const w = vscode.workspace.createFileSystemWatcher(pattern);\n\n  const build = () => {\n    let parsed: ParserSections | undefined;\n    try {\n      const txt = fs.readFileSync(parserFile, 'utf8');\n      parsed = JSON.parse(txt);\n    } catch { return; }\n    if (!parsed) return;\n\n    const items: any[] = [];\n    const seen = new Set<string>();\n\n    // userDefined pass-through\n    if (Array.isArray(parsed.userDefined)) {\n      for (const it of parsed.userDefined) {\n        if (!it || typeof it !== 'object') continue;\n        if (typeof it.id !== 'string' || !it.id) continue;\n        if (seen.has(it.id)) continue;\n        seen.add(it.id);\n        items.push({ id: it.id, typeAndPath: it.typeAndPath, icon: it.icon, label: it.label, parentId: it.parentId, cwd: it.cwd, env: it.env });\n      }\n    }\n\n    // docs builder\n    const docs = parsed.docs || {};\n    const pushDocTree = (node: DocNode, parentId: string | null) => {\n      const basename = path.basename(node.path);\n      if (node.type === 'folder') {\n        // find promotion document\n        const readme = node.children.find(c => c.type === 'doc' && /README\\.md$/i.test(c.path));\n        const baseDoc = node.children.find(c => c.type === 'doc' && path.basename(path.dirname(c.path)).replace(/\\.[^/.]+$/, '') === path.basename(node.path));\n        const promote = readme || baseDoc;\n        if (promote) {\n          const pid = idFromDoc(promote);\n          addDocItem(promote, parentId);\n          for (const child of node.children) {\n            if (child === promote) continue;\n            pushDocTree(child, pid);\n          }\n          return;\n        }\n        // regular folder item\n        const id = basename;\n        addItem({ id, typeAndPath: `folder:${node.path}`, icon: undefined, label: titleCase(basename), parentId });\n        for (const child of node.children) pushDocTree(child, id);\n        return;\n      }\n      if (node.type === 'doc') {\n        addDocItem(node, parentId);\n        return;\n      }\n      // resource\n      const id = basename;\n      addItem({ id, typeAndPath: `file:${node.path}`, icon: undefined, label: titleCase(basename.replace(/\\.[^.]+$/, '')), parentId });\n    };\n\n    const addDocItem = (n: DocNode, parentId: string | null) => {\n      const id = idFromDoc(n);\n      const label = n.title && n.title.trim() ? n.title.trim() : titleCase(path.basename(n.path, '.md'));\n      addItem({ id, typeAndPath: `file:${n.path}`, icon: undefined, label, parentId });\n    };\n\n    const idFromDoc = (n: DocNode) => path.basename(n.path, '.md');\n\n    const addItem = (it: { id: string; typeAndPath: string; icon?: string; label: string; parentId: string | null }) => {\n      if (!it.id || seen.has(it.id)) return;\n      seen.add(it.id);\n      items.push({ id: it.id, typeAndPath: it.typeAndPath, icon: it.icon, label: it.label, parentId: it.parentId || undefined });\n    };\n\n    for (const key of Object.keys(docs)) pushDocTree(docs[key], null);\n\n    writeJsonAtomic(treeFile, items);\n  };\n\n  w.onDidCreate(build, null, ctx.subscriptions);\n  w.onDidChange(build, null, ctx.subscriptions);\n  w.onDidDelete(() => {}, null, ctx.subscriptions);\n\n  if (fs.existsSync(parserFile)) build();\n\n  return { dispose() { w.dispose(); } };\n}\n\nfunction titleCase(s: string): string {\n  const tokens = s\n    .replace(/[._-]+/g, ' ')\n    .replace(/([a-z])([A-Z])/g, '$1 $2')\n    .replace(/(\\d)([A-Za-z])/g, '$1 $2')\n    .replace(/([A-Za-z])(\\d)/g, '$1 $2')\n    .split(/\\s+/)\n    .filter(Boolean);\n  return tokens.map(tok => /^[0-9]+$/.test(tok) ? tok.toUpperCase() : tok[0].toUpperCase() + tok.slice(1).toLowerCase()).join(' ');\n}\n"],
  "mappings": "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",
  "names": ["extension_exports", "__export", "activate", "deactivate", "__toCommonJS", "vscode", "vscode", "path", "fs", "https", "http", "import_child_process", "FaviconCache", "context", "urlStr", "origin", "existing", "promise", "fullUrl", "now", "entry", "icoUrl", "icoBuf", "file", "html", "href", "base", "resolved", "buf", "ext", "txt", "safe", "u", "lower", "timeoutMs", "resolve", "reject", "timedOut", "to", "req", "res", "status", "chunks", "d", "err", "re", "m", "candidates", "rel", "ProjectExplorerProvider", "_a", "ws", "pattern", "e", "element", "id", "warnings", "arr", "valid", "typeAndPath", "v", "parentId", "labelRaw", "icon", "type", "target", "newRaw", "oldRaw", "tpp", "colon", "t", "tgt", "label", "segs", "cwd", "envRaw", "env", "k", "val", "node", "pid", "visited", "stack", "cyc", "dfs", "p", "hasChildren", "iconPath", "tooltip", "codicon", "ProjectExplorerItem", "uri", "n", "_b", "originalLabel", "child", "stdout", "stderr", "notified", "finish", "ok", "message", "out", "code", "s", "collapsibleState", "vscode", "fs", "path", "ensureDir", "p", "writeJsonAtomic", "file", "obj", "tmp", "activateParser", "ctx", "_a", "ws", "outDir", "outFile", "timer", "debouncedRun", "run", "cfgListener", "e", "fsWatchers", "watchPath", "relOrAbs", "pat", "glob", "w", "readFirstH1", "txt", "m", "buildDocs", "stat", "rel", "children", "name", "child", "abs", "cfg", "watch", "userDefined", "out", "docsSection", "entry", "vscode", "fs", "path", "ensureDir", "p", "writeJsonAtomic", "file", "obj", "tmp", "activateBuilder", "ctx", "_a", "ws", "root", "outDir", "parserFile", "treeFile", "pattern", "w", "build", "parsed", "txt", "items", "seen", "it", "docs", "pushDocTree", "node", "parentId", "basename", "readme", "c", "baseDoc", "promote", "pid", "idFromDoc", "addDocItem", "child", "id", "addItem", "titleCase", "n", "label", "key", "s", "tok", "activate", "context", "_a", "provider", "ProjectExplorerProvider", "ws", "dir", "parser", "activateParser", "builder", "activateBuilder", "updateBrainstormingContext", "raw", "has", "e", "pathSetting", "targetUri", "expanded", "doc", "err", "msg", "url", "uri", "id", "deactivate"]
}
